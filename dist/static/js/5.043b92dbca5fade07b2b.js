webpackJsonp([5],{f1Eh:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},i2EO:function(e,t){},wmSr:function(e,t,n){"use strict";(function(e){var n,a;n="undefined"!=typeof window?window:this,a=function(e,t){if(void 0===e)throw new Error("Geetest requires browser environment");var n=e.document,a=e.Math,o=n.getElementsByTagName("head")[0];function s(e){this._obj=e}function r(e){var t=this;new s(e)._each(function(e,n){t[e]=n})}s.prototype={_each:function(e){var t=this._obj;for(var n in t)t.hasOwnProperty(n)&&e(n,t[n]);return this}},r.prototype={api_server:"api.geetest.com",protocol:"http://",type_path:"/gettype.php",fallback_config:{slide:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"slide",slide:"/static/js/geetest.0.0.0.js"},fullpage:{static_servers:["static.geetest.com","dn-staticdown.qbox.me"],type:"fullpage",fullpage:"/static/js/fullpage.0.0.0.js"}},_get_fallback_config:function(){return i(this.type)?this.fallback_config[this.type]:this.new_captcha?this.fallback_config.fullpage:this.fallback_config.slide},_extend:function(e){var t=this;new s(e)._each(function(e,n){t[e]=n})}};var i=function(e){return"string"==typeof e},c={},l={},u=function(e,t,n,a){t=function(e){return e.replace(/^https?:\/\/|\/$/g,"")}(t);var o=function(e){return 0!==(e=e.replace(/\/+/g,"/")).indexOf("/")&&(e="/"+e),e}(n)+function(e){if(!e)return"";var t="?";return new s(e)._each(function(e,n){(i(n)||function(e){return"number"==typeof e}(n)||function(e){return"boolean"==typeof e}(n))&&(t=t+encodeURIComponent(e)+"="+encodeURIComponent(n)+"&")}),"?"===t&&(t=""),t.replace(/&$/,"")}(a);return t&&(o=e+t+o),o},p=function(e,t,a,s,r){var i=function(c){!function(e,t){var a=n.createElement("script");a.charset="UTF-8",a.async=!0,a.onerror=function(){t(!0)};var s=!1;a.onload=a.onreadystatechange=function(){s||a.readyState&&"loaded"!==a.readyState&&"complete"!==a.readyState||(s=!0,setTimeout(function(){t(!1)},0))},a.src=e,o.appendChild(a)}(u(e,t[c],a,s),function(e){e?c>=t.length-1?r(!0):i(c+1):r(!1)})};i(0)},d=function(t,n,o,s){if("object"==typeof(r=o.getLib)&&null!==r)return o._extend(o.getLib),void s(o);var r;if(o.offline)s(o._get_fallback_config());else{var i="geetest_"+(parseInt(1e4*a.random())+(new Date).valueOf());e[i]=function(t){"success"===t.status?s(t.data):t.status?s(o._get_fallback_config()):s(t),e[i]=void 0;try{delete e[i]}catch(e){}},p(o.protocol,t,n,{gt:o.gt,callback:i},function(e){e&&s(o._get_fallback_config())})}},f=function(e,t){var n={networkError:"网络错误"};if("function"!=typeof t.onError)throw new Error(n[e]);t.onError(n[e])};e.Geetest&&(l.slide="loaded");var v=function(t,n){var a=new r(t);t.https?a.protocol="https://":t.protocol||(a.protocol=e.location.protocol+"//"),d([a.api_server||a.apiserver],a.type_path,a,function(t){var o=t.type,s=function(){a._extend(t),n(new e.Geetest(a))};c[o]=c[o]||[];var r=l[o]||"init";"init"===r?(l[o]="loading",c[o].push(s),p(a.protocol,t.static_servers||t.domains,t[o]||t.path,null,function(e){if(e)l[o]="fail",f("networkError",a);else{l[o]="loaded";for(var t=c[o],n=0,s=t.length;n<s;n+=1){var r=t[n];"function"==typeof r&&r()}c[o]=[]}})):"loaded"===r?s():"fail"===r?f("networkError",a):"loading"===r&&c[o].push(s)})};return e.initGeetest=v,v},"object"==typeof e&&"object"==typeof e.exports?e.exports=n.document?a(n):function(e){if(!e.document)throw new Error("Geetest requires a window with a document");return a(e)}:a(n),t.a=initGeetest}).call(t,n("f1Eh")(e))},xJsL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("wmSr"),o={name:"Login",data:function(){return{login_type:1,username:"",password:"",remember:!1,mobile:"",sms:"",validateResult:!1,verify_code:""}},components:{},methods:{handlerLogin:function(){var e=this;if(!this.validateResult)return alert("请输入正确的验证码"),!1;this.$axios.post("http://api.luffycity.cn:8000/user/login/",{username:this.username,password:this.password},{responseType:"json"}).then(function(t){console.log(t.data),e.remember?(sessionStorage.removeItem("token"),localStorage.token=t.data.token,localStorage.id=t.data.id,localStorage.username=t.data.username):(localStorage.removeItem("token"),sessionStorage.token=t.data.token,sessionStorage.id=t.data.id,sessionStorage.username=t.data.username),e.$router.go(-1)}).catch(function(e){console.log(e)})},handlerPopup:function(e){var t=this;e.onSuccess(function(){e.getValidate();t.validateResult=!0}),e.appendTo("#geetest")}},created:function(){var e=this;this.$axios.get("http://api.luffycity.cn:8000/user/verify/",{responseType:"json"}).then(function(t){var n=t.data;Object(a.a)({gt:n.gt,challenge:n.challenge,product:"embed",offline:!n.success,width:"100%"},e.handlerPopup)}).catch(function(e){console.log(e)})}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login box"},[n("img",{attrs:{src:"http://api.luffycity.cn:8000/static/login/Loginbg.3377d0c.jpg",alt:""}}),e._v(" "),n("div",{staticClass:"login"},[e._m(0),e._v(" "),n("div",{staticClass:"login_box"},[n("div",{staticClass:"title"},[n("span",{class:1==e.login_type?"current":"",on:{click:function(t){e.login_type=1}}},[e._v("密码登录")]),e._v(" "),n("span",{class:2==e.login_type?"current":"",on:{click:function(t){e.login_type=2}}},[e._v("短信登录")])]),e._v(" "),n("div",{staticClass:"inp",class:1==e.login_type?"show":""},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"user",attrs:{type:"text",placeholder:"用户名 / 手机号码"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"pwd",attrs:{type:"password",name:"",placeholder:"密码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),n("div",{attrs:{id:"geetest"}}),e._v(" "),n("div",{staticClass:"rember",model:{value:e.remember,callback:function(t){e.remember=t},expression:"remember"}},[e._m(1),e._v(" "),n("p",[e._v("忘记密码")])]),e._v(" "),n("button",{staticClass:"login_btn",on:{click:this.handlerLogin}},[e._v("登录")]),e._v(" "),n("p",{staticClass:"go_login"},[e._v("没有账号 "),n("span",[n("router-link",{attrs:{to:"/register"}},[e._v("立即注册")])],1)])]),e._v(" "),n("div",{staticClass:"inp",class:2==e.login_type?"show":""},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],staticClass:"user",attrs:{type:"text",placeholder:"手机号码"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"pwd",attrs:{type:"password",name:"",placeholder:"短信验证码"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),e._m(2),e._v(" "),n("button",{staticClass:"login_btn"},[e._v("登录")]),e._v(" "),e._m(3)])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"login-title"},[t("img",{attrs:{src:"http://api.luffycity.cn:8000/static/login/Logotitle.1ba5466.png",alt:""}}),this._v(" "),t("p",[this._v("帮助有志向的年轻人通过努力学习获得体面的工作和生活!")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("input",{staticClass:"no",attrs:{type:"checkbox",name:"a"}}),this._v(" "),t("span",[this._v("记住密码")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"rember"},[t("p",[t("input",{staticClass:"no",attrs:{type:"checkbox",name:"a"}}),this._v(" "),t("span",[this._v("记住密码")])]),this._v(" "),t("p",[this._v("忘记密码")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",{staticClass:"go_login"},[this._v("没有账号 "),t("span",[this._v("立即注册")])])}]};var r=n("VU/8")(o,s,!1,function(e){n("i2EO")},"data-v-0ccec070",null);t.default=r.exports}});
//# sourceMappingURL=5.043b92dbca5fade07b2b.js.map
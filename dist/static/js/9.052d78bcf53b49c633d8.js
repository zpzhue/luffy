webpackJsonp([9],{hUeD:function(t,e){},hYSc:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s("GgDs"),a=s("9iUS"),n={name:"Courses",data:function(){return{token:sessionStorage.token||localStorage.token,id:sessionStorage.id||localStorage.id,current_page:1,filter_price:!1,courseCategroy:[],courseList:[],filterParam:0,orderParam:"",pageSize:3,currentCate:-1,currentOrder:1,pageCount:5}},components:{Header:r.default,Footer:a.default},created:function(){var t=this;this.$axios.get(this.$remote_server+"/course/course_categroy/").then(function(e){t.courseCategroy=e.data}).catch(function(t){console.log(t)}),this.handlerChangePage(this.current_page)},methods:{getParams:function(){var t={};return this.filterParam&&(t.course_category=this.filterParam),this.orderParam&&(t.ordering=this.orderParam),t.page=this.current_page,t.page_size=this.pageSize,t},changeCategory:function(t){this.currentCate=t,this.filterParam=-1===t?"":this.courseCategroy[t].id,this.handlerChangePage(1)},changeOrder:function(t,e){this.currentOrder=e,this.orderParam=3===e?"-price"===t?"price":"-price":t,this.handlerChangePage(1)},handlerChangePage:function(t){this.current_page=t;var e=this;this.$axios.get(this.$remote_server+"/course/",{params:e.getParams()}).then(function(t){e.courseList=t.data.results,e.pageCount=t.data.count}).catch(function(t){console.log(t)})},handlerAddCart:function(t){if(!this.token||!this.id)return this.$router.push({name:"Login"}),!1;this.$axios.post(this.$remote_server+"/cart/",{course_id:t},{headers:{Authorization:"JWT "+this.token},responseType:"json"}).then(function(t){console.log(response.data)}).catch(function(t){console.log(t.response)})}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"courses"},[s("Header",{attrs:{current_page:t.current_page}}),t._v(" "),s("div",{staticClass:"main"},[s("div",{staticClass:"filter"},[s("el-row",{staticClass:"filter-el-row1"},[s("el-col",{staticClass:"filter-text",attrs:{span:2}},[t._v("课程分类:")]),t._v(" "),s("el-col",{class:-1===t.currentCate?"current":"",attrs:{span:2}},[s("div",{on:{click:function(e){return t.changeCategory(-1)}}},[t._v("全部")])]),t._v(" "),t._l(t.courseCategroy,function(e,r){return s("el-col",{key:r,class:t.currentCate===r?"current":"",attrs:{span:2}},[s("div",{on:{click:function(e){return t.changeCategory(r)}}},[t._v(t._s(e.name))])])})],2),t._v(" "),s("el-row",{staticClass:"filter-el-row2"},[s("el-col",{staticClass:"filter-text filter-text2",attrs:{span:2}},[t._v("筛       选:")]),t._v(" "),s("el-col",{class:1===t.currentOrder?"current":"",attrs:{span:2}},[s("div",{on:{click:function(e){return t.changeOrder("id",1)}}},[t._v("默认")])]),t._v(" "),s("el-col",{class:2===t.currentOrder?"current":"",attrs:{span:2}},[s("div",{on:{click:function(e){return t.changeOrder("-studys",2)}}},[t._v("人气")])]),t._v(" "),s("el-col",{attrs:{span:2}},[s("span",{class:3===t.currentOrder?"current":"",on:{click:[function(e){e.stopPropagation(),t.filter_price=!t.filter_price},function(e){return t.changeOrder(t.orderParam,3)}]}},[t._v("价格\n              ")]),t._v(" "),s("div",{staticClass:"filter-price"},[s("span",{staticClass:"up",class:!0===t.filter_price?"active":"",on:{click:function(e){e.stopPropagation(),t.filter_price=!0}}},[s("i",{staticClass:"el-icon-caret-top"})]),t._v(" "),s("span",{staticClass:"down",class:!1===t.filter_price?"active":"",on:{click:function(e){e.stopPropagation(),t.filter_price=!1}}},[s("i",{staticClass:"el-icon-caret-bottom"})])])])],1)],1),t._v(" "),s("div",{staticClass:"courses_list"},t._l(t.courseList,function(e,r){return s("el-row",{key:r,staticClass:"course-item"},[s("el-col",{staticClass:"course-item-box",attrs:{span:24}},[s("el-row",[s("el-col",{staticClass:"course-item-left",attrs:{span:12}},[s("img",{attrs:{src:e.course_img,alt:""}})]),t._v(" "),s("el-col",{staticClass:"course-item-right",attrs:{span:12}},[s("div",{staticClass:"course-title"},[s("p",{staticClass:"box-title"},[t._v(t._s(e.name))]),t._v(" "),s("p",{staticClass:"box-number"},[t._v(t._s(e.studys)+"人已加入学习")])]),t._v(" "),s("div",{staticClass:"author"},[s("p",{staticClass:"box-author"},[t._v(t._s(e.teacher.name)+" "+t._s(e.teacher.title))]),t._v(" "),s("p",{staticClass:"lession"},[t._v("共"+t._s(e.lessons)+"课时"),s("span",[t._v("/"+t._s(e.lessons!==e.pub_lessons?e.pub_lessons+"课时":"更新完成"))])])]),t._v(" "),s("el-row",{staticClass:"course-content"},t._l(e.starts_lesson,function(e,r){return s("el-col",{key:r,attrs:{span:12}},[s("i",{staticClass:"el-icon-caret-right"}),t._v("\n                            "+t._s("0"+e.order)+" | "+t._s(e.name)+"\n                            "),s("span",{directives:[{name:"show",rawName:"v-show",value:e.free_trial,expression:"item.free_trial"}],staticClass:"free"},[t._v("免费")])])}),1),t._v(" "),s("div",{staticClass:"course-price"},[s("p",{staticClass:"course-price-left"},[s("span",{staticClass:"discount"},[t._v(t._s(e.preferentials.policy_type))]),t._v(" "),s("span",{staticClass:"count"},[t._v("¥"+t._s(e.preferentials.preferential_price))]),t._v(" "),s("span",{staticClass:"old_count"},[t._v("原价: ¥"+t._s(e.price)+"元")])]),t._v(" "),s("button",{staticClass:"buy ",on:{click:function(s){return t.handlerAddCart(e.id)}}},[t._v("加入购物车")]),t._v(" "),s("button",{staticClass:"buy buy2"},[t._v("立即购买")])])],1)],1)],1)],1)}),1)]),t._v(" "),s("el-row",[s("el-col",{attrs:{span:16,offset:8}},[s("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.pageCount},on:{"current-change":t.handlerChangePage}})],1)],1),t._v(" "),s("Footer")],1)},staticRenderFns:[]};var c=s("VU/8")(n,i,!1,function(t){s("hUeD")},"data-v-5439eef0",null);e.default=c.exports}});
//# sourceMappingURL=9.052d78bcf53b49c633d8.js.map